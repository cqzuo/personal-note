%toc
# ����ģ������ #
## ���Ź��� ##
  1. ����:http://localhost:8080/DECG/org/OrgAction.action
  1. OrgAction
> {{{class="brush: java"
package com.decg.organization.action;

import javax.annotation.Resource;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import com.decg.baseaction.BaseAction;
import com.decg.organization.OrgSupport;
import com.decg.organization.Organization;
import com.decg.organization.service.OrgService;
import com.opensymphony.xwork2.ActionContext;

@Controller
@Scope("prototype")
public class OrgAction extends BaseAction {

> @Resource(name = "orgServiceBean")
> private OrgService orgService;

> private Organization organization;
> private OrgSupport orgSupport = new OrgSupport();

> /
    * �����б�
    * 
> public String execute() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > String result = "orgList\_success";
> > if(this.orgSupport.getSelect()) {
> > > result = "selectOrgList\_success";

> > }
> > ActionContext.getContext().put("orgList", orgService.orgList(this.orgSupport.getParentId()));
> > return result;

> }

> /
    * ���ӻ�������
    * 
> public String addOrgUI() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > return "addOrgUI\_success";

> }

> /
    * ���ӻ���
    * 
> public String addOrg() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > orgService.addOrg(this.organization, this.orgSupport.getParentId());
> > return "goOrgList\_success";

> }

> /
    * ��������
    * 
> public String goOrgDetail() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > ActionContext.getContext().put("orgEntity", orgService.find(Organization.class, this.organization.getId()));
> > return "goOrgDetail\_success";

> }

> /
    * ���»���
    * 
> public String updateOrg() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > orgService.updateOrg(this.organization, this.orgSupport.getParentId());
> > return "goOrgList\_success";

> }

> /
    * ɾ������.���������ӻ���������ɾ��
    * 
> public String deleteOrg() {
> > if(!this.isLogin()) {
> > > return this.checkResult();

> > }
> > orgService.delete(Organization.class, this.organization.getId());
> > return "goOrgList\_success";

> }

> public Organization getOrganization() {
> > return organization;

> }

> public void setOrganization(Organization organization) {
> > this.organization = organization;

> }

> public OrgSupport getOrgSupport() {
> > return orgSupport;

> }

> public void setOrgSupport(OrgSupport orgSupport) {
> > this.orgSupport = orgSupport;

> }
} }}}
 # ע
  - Action���̳���BaseAction
  - �ж��û���¼�ͷ���ҳ������Ϣ
 {{{class="brush: java"
package com.decg.baseaction;

import com.decg.user.User;
import com.opensymphony.xwork2.ActionContext;


public class BaseAction {
	
	/**
	 * �û��Ƿ���¼
	 * @return	boolean trueΪ�ѵ�¼��falseΪδ��¼
	 */
	public boolean isLogin() {
		boolean flag = false;
		User u = (User)ActionContext.getContext().getSession().get("user");
		if(u != null) {
			flag = true;
		}
		return flag;
	}
	
	/**
	 * ���صĽ���ҳ������Ϣ
	 */
	public String checkResult() {
		ActionContext.getContext().put("message", "����û�е�¼,����ִ�иò���.");
		return "message";
	}
	
}
  }}}
```