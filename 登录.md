%toc
# ��¼ #
## ��¼ҳ�� ##
{{{class="brush: xml"


&lt;form action="${pageContext.request.contextPath}/user/LoginAction.action" method="post"&gt;


<table cellpadding='0' width='100%' border='0' cellspacing='6'>
<blockquote><tr>
<blockquote><td>
</blockquote></blockquote><blockquote>�û���:<br>
<br>
<input type="text" name="user.username" style="width: 10em" maxlength="20" id="username"/><br>
<br>
<br>
</blockquote><blockquote></td>
<blockquote></tr>
<tr>
</blockquote><td>
<blockquote>��&nbsp;&nbsp;�룺<br>
<br>
<input type="password" name="user.password" style="width: 10em" maxlength="20" id="password"/><br>
<br>
<br>
<blockquote></td>
</blockquote><blockquote></tr>
</table>}}}
 # ע
  - ҳ����ͳһ����·��
   - ���� pageContext .request.contextPath��ֵ
    - ȡ��������Ӧ�ó�������
      - ${pageContext.request.contextPath} 
  - ҳ���ı���
    - name�ı�ǩ
      - bean������.�������� 
== action ==
{{{class="brush: java"
package com.decg.user.action;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.Resource;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import com.decg.baseaction.BaseAction;
import com.decg.user.User;
import com.decg.user.service.UserService;
import com.hengtong.base.bean.QueryResult;
import com.opensymphony.xwork2.ActionContext;

@Controller
@Scope("prototype")
public class LoginAction extends BaseAction {

	@Resource(name = "userServiceBean")
	private UserService userService;

	private User user = new User();

	/**
	 * �û���¼
	 */
	public String execute() {
		String result = "message";
		String whereStatement = "o.username=?1 and o.password=?2";
		List<Object> whereParam = new ArrayList<Object>();
		whereParam.add(this.user.getUsername());
		whereParam.add(this.user.getPassword());
		QueryResult<User> qr = userService.getScrollData(User.class,
				whereStatement, whereParam);
		if (qr.getResultList() != null && qr.getResultList().size() > 0) {
			User u = qr.getResultList().get(0);
			ActionContext.getContext().getSession().put("user", u);
			result = "login_success";
		}
		return result;
	}

	/**
	 * ��ȡ��¼�˾���Ȩ�޵Ĳ˵��б�(��ҳ���߲˵�����Ϣ)
	 */
	public String frameMenu() {
		// �Ƿ���¼
		if (!this.isLogin()) {
			return this.checkResult();
		}
		User u = (User) ActionContext.getContext().getSession().get("user");
		ActionContext.getContext().put("menuList",
				userService.getMenu(u.getId()));
		return "frameMenu_success";
	}

	/**
	 * ��ȡ�û���¼��Ϣ(��ҳͷ����Ϣ)
	 */
	public String frameHead() {
		// �Ƿ���¼
		if (!this.isLogin()) {
			return this.checkResult();
		}
		User u = (User) ActionContext.getContext().getSession().get("user");
		ActionContext.getContext().put("userEntity", u);
		return "frameHead_success";
	}

	public String frameMain() {
		
		return "frameMain_success";
	}

	public User getUser() {
		return user;
	}

	public void setUser(User user) {
		this.user = user;
	}

} 
}}}
 # ע
  - ��ȡҳ���ύ������ֵ
   - ֱ�ӻ�ȡ
  -  ��ѯ������ƴ��
{{{class="brush: java"
 	String whereStatement = "o.username=?1 and o.password=?2";
		List<Object> whereParam = new ArrayList<Object>();
		whereParam.add(this.user.getUsername());
		whereParam.add(this.user.getPassword());
}}}
  - ��ѯ����
{{{class="brush: java"
 QueryResult<User> qr = userService.getScrollData(User.class,whereStatement, whereParam);
}}}
</code></pre>